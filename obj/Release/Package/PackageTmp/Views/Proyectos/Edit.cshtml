@model SAG2.Models.Proyecto
@{
    ViewBag.Title = "Modificar";
}
@{
    SAG2.Models.Usuario Usuario = (SAG2.Models.Usuario)Session["Usuario"];
}
<style>
/* Conversion a mayusculas */
input[type="text"], textarea
{
    text-transform: uppercase;
}
</style>
<div id="SAGBox">
    <h3>Proyectos</h3>
    <div id="controles">

    </div>
    <div id="contenido" class="personal">
@using (Html.BeginForm())
{
    @Html.Raw(@ViewBag.Mensaje)
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.ID)
    @Html.HiddenFor(model => model.MesInicio)
    @Html.HiddenFor(model => model.PeriodoInicio)
    @Html.Hidden("DireccionID", Model.DireccionID)
    @Html.Hidden("ConvenioID", Model.ConvenioID)
       
  <fieldset>      
  <div class="panel panel-default">
  <div class="panel-heading"><h3><b>Datos de Proyecto</b></h3></div>
  <div class="panel-body">
   <h3><b>Antecedentes del Proyecto</b></h3>
      <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 28px;">
              @Html.LabelFor(model => model.Institucion, "Institución")
          </div>
           <div class="form-group" style="margin-right: 20px;">
                @if (Usuario.esAdministrador)
                {
                    @Html.TextBoxFor(model => model.Institucion, new { @class = "form-control", @style="width: 250px;" })
                }
                else
                {
                    @Html.TextBoxFor(model => model.Institucion, new { @class = "form-control", @readonly = "readonly", @style="width: 250px;" })
                }
           </div>
          <div class="form-group" style="margin-right: 10px;">
            @Html.LabelFor(model => model.Nombre, "Proyecto")
          </div>
          <div class="form-group">
               @if (Usuario.esAdministrador)
                {
                    @Html.TextBoxFor(model => model.Nombre, new { @class="form-control", @style="width: 250px;" })
                }
                else
                {
                    @Html.TextBoxFor(model => model.Nombre, new {@class="form-control", @readonly = "readonly", @style="width: 250px;" })
                }
          </div>
      </div>
       <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 10px;">
               @Html.LabelFor(model => model.TipoProyectoID, "Tipo proyecto")
          </div>
           <div class="form-group">
                @Html.DropDownList("TipoProyectoID", null, new { @class = "form-control" })
           </div>
          </div>
      <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 15px;">
               @Html.LabelFor(model => model.CodCodeni, "Cód. CODENI")
          </div>
          <div class="form-group" style="margin-right: 99px;">
              @if (Usuario.esAdministrador)
                {
                    @Html.TextBoxFor(model => model.CodCodeni, new {  @class = "form-control" })
                }
                else
                {
                    @Html.TextBoxFor(model => model.CodCodeni, new {  @class = "form-control", @readonly = "readonly" })
                }
          </div>
          <div class="form-group" style="margin-right: 10px;">
           @Html.LabelFor(model => model.CodSename, "Cód. SENAME")
          </div>
          <div class="form-group">
              @Html.TextBoxFor(model => model.CodSename, new { @class = "form-control" })
          </div>
      </div>
       <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 30px;">
              @Html.LabelFor(model => model.DireccionID, "Dirección")
          </div>
           <div class="form-group" >
            @Html.TextBoxFor(model => model.Direccion.Calle, new { @class = "form-control", @placeholder="Calle" })
          </div>
           <div class="form-group" >
             @Html.TextBoxFor(model => model.Direccion.Numero, new { @class = "form-control", @placeholder="Numero", @style="width: 100px;" })
          </div>
           <div class="form-group" >
             @Html.TextBoxFor(model => model.Direccion.Depto, new { @class = "form-control", @placeholder="Depto" })
          </div>
       </div>
       <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 45px;">
              @Html.Label("Región")
          </div>    
           <div class="form-group" style="margin-right: 65px;">
              @Html.DropDownList("RegionID", null, new { @class = "form-control", @comuna = Model.Direccion.ComunaID.ToString() })
          </div>  
           <div class="form-group" style="margin-right: 10px;">
              @Html.Label("Comuna")
          </div>    
           <div class="form-group" style="margin-right: 10px;">
                   <select class="form-control" name="ComunaID" id="ComunaID" tabindex="11">
                    <option>Seleccione región</option>
                </select>
          </div>      
       </div>
       <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 10px;">
              @Html.LabelFor(model => model.Fono, "Tél. contacto")
          </div>
             <div class="form-group" style="margin-right: 10px;">
             @Html.TextBoxFor(model => model.Fono, new { @class = "form-control" })
          </div>
       </div>
    <h3><b>Antecedentes del Convenio</b></h3>
    <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 10px;">
             @Html.LabelFor(model => model.Convenio.ResEx, "Res. Ex.")
              </div>
        <div class="form-group">
            @Html.TextBoxFor(model => model.Convenio.ResEx, new { @class = "form-control" })
          </div>
          <div class="form-group">@Html.LabelFor(model => model.Convenio.NroPlazas, "Nº Plazas")</div>
            <div class="form-group">@Html.TextBoxFor(model => model.Convenio.NroPlazas, new { @class = "form-control" })</div>
    </div>
    <div class="form-group form-inline">
          <div class="form-group" style="margin-right: 10px;">
              <label>Desde</label>
          </div>
         <div class="form-group" style="margin-right: 10px;">
              @{
                if (Model.Convenio.FechaInicio != null)
                {
                        @Html.TextBox("FechaInicio", Model.Convenio.FechaInicio.Value.ToShortDateString(), new {  @class = "calendario form-control" })
                }
                else
                {
                        @Html.TextBox("FechaInicio", string.Empty, new {  @class = "calendario form-control" })
                }
                    }
          </div>
         <div class="form-group" style="margin-right: 10px;">
              <label>Hasta</label>
          </div>
         <div class="form-group" style="margin-right: 10px;">
            @{
                if (Model.Convenio.FechaTermino != null)
                {
                   @Html.TextBox("FechaTermino", Model.Convenio.FechaTermino.Value.ToShortDateString(), new { @class = "calendario form-control" })
                }
                else
                {
                    @Html.TextBox("FechaTermino", string.Empty, new {  @class = "calendario form-control" })
                }
                    } 
         </div>
    </div>
     <div class="form-group form-inline">     
         <div class="form-group" style="margin-right: 10px;">
               @Html.LabelFor(model => model.EdadMinima, "Edad mínima")   
          </div>
         <div class="form-group" style="margin-right: 10px;">
             @Html.TextBoxFor(model => model.EdadMinima, new { @class = "form-control" })   
          </div>
          <div class="form-group" style="margin-right: 10px;">
             @Html.LabelFor(model => model.EdadMaxima, "Edad máxima")  
          </div>
         <div class="form-group" style="margin-right: 10px;">
              @Html.TextBoxFor(model => model.EdadMaxima, new { @class = "form-control" })  
          </div>
          <div class="form-group" style="margin-right: 10px;">
             @Html.LabelFor(model => model.Sexo)
          </div>
          <div class="form-group" style="margin-right: 10px;">
                 <select id="Sexo" name="Sexo" class="form-control">
                    <option value="F"@if (Model.Sexo == "F") {@Html.Raw(" selected=\"selected\"")}>Femenino</option>
                    <option value="M"@if (Model.Sexo == "M") {@Html.Raw(" selected=\"selected\"")}>Masculino</option>
                    <option value="A"@if (Model.Sexo == "A") {@Html.Raw(" selected=\"selected\"")}>Mixto</option>
                </select>
          </div>
     </div>
       <div class="form-group"><lable>Comentarios</lable></div>
            <div class="form-group">@Html.TextAreaFor(model => model.Convenio.Comentarios, new { @class="form-control" })</div>
      <div class="form-group form-inline">
            <div  class="form-group">@Html.LabelFor(model => model.ValorSubvencion, "Subvención diaria")</div>
            <div  class="form-group">@Html.TextBoxFor(model => model.ValorSubvencion, new {  @class="form-control" })</div>
         
            <div  class="form-group">@Html.LabelFor(model => model.DiasAtencion, "Dias atención")</div>
            <div  class="form-group">@Html.TextBoxFor(model => model.DiasAtencion, new {  @class="form-control" })</div>
            <div class="form-group">@Html.LabelFor(model => model.Flexibilizacion)</div>
            <div class="form-group">
                @if (Model.Flexibilizacion != null)
                {
                <input class="form-control" type="checkbox" name="Flexibilizacion" value="S" checked="checked" tabindex="21" />
                }
                else
                { 
                <input class="form-control" type="checkbox" name="Flexibilizacion" value="S" tabindex="21" />
                }

            </div>

      </div>
      
  </div>
  <div class="panel-footer">
	<div  style ="width: 500px ; display:inline-block">
           <a class="btn btn-success" data-toggle="tooltip" data-placement="top" title="Buscar" href="../Index" onclick="window.open(this.href, 'Buscar','width=750,height=400,scrollbars=yes,menubar=no,toolbars=no'); return false"><span class ="fa fa-search fa-lg"></span></a>
        @if (Usuario.esAdministrador)
        {
        <a  class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Nuevo" href="@System.Configuration.ConfigurationManager.AppSettings["prePath"].ToString()/Proyectos/Create"><span class ="fa fa-file-o  fa-lg"></span></a>
        <a class="btn btn-danger" data-toggle="tooltip" data-placement="top" title="Eliminar" href="../Eliminar/@Html.Raw(Model.ID.ToString())" onclick="return confirm('Realmente desea borrar este Proyecto, se borrara toda la información de la Base de Datos?');"><span class ="fa fa-trash-o fa-fw"></span></a>
        }
        @if (Usuario.esAdministrador || Usuario.esSupervisor)
        {
        <a class="btn btn-warning" data-toggle="tooltip" data-placement="top" title="Cerrar" href="../Cerrar/@Html.Raw(Model.ID.ToString())" onclick="return confirm('Al cerrar este Proyecto no podrá realizar más modificaciones, desea continuar?');"><span class ="fa fa-exclamation-triangle fa-fw"></span></a>   
        }
        <a class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Cancelar" href="@System.Configuration.ConfigurationManager.AppSettings["prePath"].ToString()/Proyectos/Create"><span class ="fa fa-undo fa-fw"></span></a>
          
        </div>
         <div style="float :right;display:inline-block">
	    <input class="btn btn-primary" type="submit" value="Guardar" />
	</div>

  </div>
</div>
  
    </fieldset>
}
    </div>
</div>
